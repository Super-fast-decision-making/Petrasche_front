<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/main_style.css">
    <link rel="stylesheet" href="/static/css/neighbor.css">
    <link rel="stylesheet" href="/static/css/hashtag.css">
    <script src="https://kit.fontawesome.com/0e01622099.js" crossorigin="anonymous"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/34.2.0/classic/ckeditor.js"></script>
    <!-----텍스트에디터 ckeditor------>
    

    <title>Main Page</title>
    <style>
        .ck-editor__editable{
            min-height: 300px;
        }
    </style>
</head>
<body oncontextmenu="return false" ondragstart="return false" onselectstart="return false">
    <div id="now_loading" class="load_img">
        <img src="https://i.pinimg.com/originals/b5/9e/c4/b59ec4cdd3e542541ec5c5234b92a9b6.gif" alt="" srcset="">
    </div>
    <div id="now_loading_page" class="load_img">
        <img src="https://media4.giphy.com/media/nMoMxQG2uJsGTBsjsO/giphy.gif?cid=6c09b9522kmc1si0rh34bk2aps7wu7lwtgy3ie6iwe7pyxxt&rid=giphy.gif&ct=s"
            alt="" srcset="">
    </div>
    <div id="login_modal_box" class="login_modal_box">
            <div class="login_box">
            <h1>Petrasche</h1>
            <input id="email" type="text" placeholder="이메일">
            <input id="password" type="password" placeholder="패스워드">
            <div onclick="handleLogin()" class="login_btn"><button>로그인</button></div>
            <div onclick="kakaoLogin()" class="kakao_login">카카오 로그인</div>
            <a href="/signup.html">계정이 없으신가요? 회원가입</a>
        </div>
    </div>
    <div id="modal_edit_box" class="modal_edit_box">
        <div class="modal_edit_box_input"><textarea id="modal_edit_text" rows="5" cols="50"
                placeholder="내용....."></textarea>
            <button id="modal_edit_button" class="modal_edit_button">수정</button>
            <button onclick="modal_edit_cancel()" id="modal_edit_cancel" class="modal_edit_cancel">취소</button>
        </div>
    </div>


            <!-- 상단 메뉴바 -->
            <nav class="navbar">
                <div class="logo">
                    Petrasche
                </div>
                <div class="serch">
                    <input name="search" id="words_for_search" type="text" placeholder="Petrasche">
                    <button class="serch_button" type="button" onclick="search()">검색</button>
                </div>
                <div class="user_info">
                    <div onclick="UserPage()" id="user_profile" class="user_profile">
                        <img src="https://image.genie.co.kr/Y/IMAGE/IMG_ALBUM/081/867/444/81867444_1616662460652_1_600x600.JPG"
                            alt="">
                    </div>
                    <div onclick="alarm(this)" id="alarm" class="alarm">
                        <i class="fa-solid fa-bell"></i>
                        <div class="history">
    
                        </div>
                    </div>
                    <div class="user">
                        <span class="user_name" id="user">유저님</span>
                    </div>
                    <div onclick="Logout()" class="logout">로그아웃</div>
                </div>
            </nav>
            <!--  -->
            <div id="map_modal" style="display: none;padding:20px;left:30%;background-color:skyblue;width:500px;height:500px;z-index:10000;position:absolute;">
                <div id="map" style="height:460px; width: 460px;"></div>
            </div>


            
        <div class="top_section">
            <div class="left_menu" style="height:400px">
                <div class="menu_dog">
                    <img src="https://cdn-icons-png.flaticon.com/512/2754/2754652.png" alt="">
                    댕댕이
                </div>

                <div class="menu_cat">
                    <img src="https://cdn-icons-png.flaticon.com/512/4445/4445870.png" alt="">
                    냥냥이
                </div>

                <div class="menu_petshop">
                    <img src="https://cdn-icons-png.flaticon.com/512/452/452823.png" alt="">
                    펫샵
                </div>
                <div onclick="upload_modal_open()" class="menu_upload">
                    <img src="https://kr.seaicons.com/wp-content/uploads/2015/11/arrow-upload-icon.png" alt="">
                    업로드
                </div>
                <div onclick="walkModalOpen()" class="menu_dog">
                    <img src="https://kr.seaicons.com/wp-content/uploads/2015/11/arrow-upload-icon.png" alt="">
                    산책
                </div>
            </div>



            <!--  본문 -->
            <div id="r_sec" class="right_section" >
                <div class="r_section_title"><p>소셜 산책</p></div>
                <div class="time_bar" >
                    
                    
                    
                    <section class="slider-wrapper">
                        <button class="slide-arrow" id="slide-arrow-prev">
                            &#8249;
                        </button>
                        <button class="slide-arrow" id="slide-arrow-next">
                            &#8250;
                        </button>
                        <ul class="slides-container" id="slides-container">
                            <!-- <li class="slide">7/22(금)</li>
                            <li class="slide">7/23(토)</li>
                            <li class="slide">7/24(일)</li>
                            <li class="slide">7/25(월)</li>
                            <li class="slide">7/26(월)</li>
                            <li class="slide">7/27(월)</li>
                            <li class="slide">7/28(월)</li>
                            <li class="slide">7/29(월)</li> -->
                        </ul>
                    </section>

                </div>
                <div style="width:100%; height:35px;"></div>

                <!--드롭다운---->
                
                <div>
                    <div class="dropdown">
                        <button class="dropbtn" id="dropbtn_g" >gender</button>
                        <div class="dropdown-content" id="dropdown_gender">
                        </div>
                    </div>
    
    
                    <div class="dropdown">
                        <button class="dropbtn" id="dropbtn_s">size</button>
                        <div class="dropdown-content" id="dropdown_size">
                        </div>
                    </div>

    
                    <div class="dropdown">
                        <button class="dropbtn"  id="dropbtn_r">region</button>
                        <div class="dropdown-content"  id="dropdown_region">
                        </div>
                    </div>

                    <div class="dropdown">
                        <button class="dropbtn"  id="dropbtn_n">number</button>
                        <div class="dropdown-content" id="dropdown_number">
                        </div>
                    </div>
    
                </div>
                <div class="neighbor_list" >
                    
                    <table id="customers" class="n_list">
                        </tr>
                    </table>
                </div>
                <div class="pagination">
                    <button class="btn"id="left_page">
                        <svg xmlns="http://www.w3.org/2000/svg" class="btn--icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <div id='pages' class="pages">
                        <!-- <a class="page">1</a>
                        <a class="page">2</a> -->
                        <!-- <a class="page active">3</a> -->
                        <!-- <a class="page">4</a>
                        <a class="page">5</a>
                        <a class="page">6</a> -->

                    </div>
                    <button class="btn" id="right_page">
                        <svg xmlns="http://www.w3.org/2000/svg" class="btn--icon" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                            stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>


            </div> 


            <!--  detail 페이지 본문 -->
            <div id="detail_r_sec" class="right_section" style="width:70%;margin-left: 50px;padding:20px;display:none">
                
                <div style="width:100%; min-height: 500px;">
                    
                    <div class="main_column"style="display:flex; float:left;width:65%; height:100%;border-radius: 8px; background-color:white;padding:10px">
                        
                        <div style="width:100%; margin:20px; height:100%; ">
                            <div style="display:flex;justify-content: space-between;"><div style="display:flex"><img id="detail_profile" style="border-radius: 71%;height:30px; width:30px"></img><h2 id="host_name">00 산책장</h2></div><button id="go_back" onclick=goBack() style="background-color:black; color:white; border:none; padding: 0 10px;border-radius:10px">뒤로가기</button></div>
                            <div style="width:400px; height:100px; background-color:white; margin:30px auto;display: flex; justify-content: space-between;">
                                <span></span>
                                <h1 id="timer" style="margin:auto 0;">05:30:33</h1>
                                <span></span>
                                
                            </div>
                            <hr>
                            <div style="width:90%; height:500px; background-color:white; margin:0 auto;">
                                
                                <img id='w_d_img_box'style="width:300px; height:300px; background-color: grey;border-radius: 5px;margin: 20px auto;display:block; margin:10px auto;over-fit:cover"/>
                                
                                <p id="detail_contents" style="text-align: center;">우리 뿌숑이랑 같이 산책 갈 사람 구함여~<br>우리 이쁘고 착한 뿌숑이는 짖지도않고 사람을 좋아해요~~ 단 한번도 물지 않은 뿌숑이랑 같이 산책 나가실 분 구합니다!<br>사람을 좋아하긴하는데 다른 강아지들은 조금 무서워해요..ㅜㅜ 착한 친구 강아지 구합니다!</p>
                            </div>
                        </div>                        
                    </div>
                    <div class="right_column"style="display:flex; float:right; width:30%; height:400px; background-color:white;margin:20px;display:flex; border-radius:8px;position:relative;padding:20px">
                        
                        <div style="width:100%; height:300px; margin-bottom:20px; margin-left: 20px;font-weight:600">
                            <br>
                            <p style="display: block;">날짜: <span id="detail_date">7/23</span></p><br>
                            <p>위치: <span id="detail_place">장지동</span></p><br>
                            <p>성별: <span id="detail_gender">남,여</span></p><br>
                            <p>인원: <span id="detail_number">4명</span></p><br>
                            <p>사이즈: 대형견만</p>
                        </div>
                        <button class="attend_walk" id="attend_walk" style="width:85%; height:100px; background-color:pink; border-radius: 8px;text-align: center; position:absolute; bottom: 20px;"> 산책가기 <br> <span id="left_seat"></span>자리 남았습니다</button>
                    
                    </div>
                    
                </div>
            </div>



                <!----- 업로드 모달------->
                <!-- Trigger/Open The Modal -->
                <!-- The Modal -->
                <div id="myModal" class="modal">
                
                    <!-- Modal content -->
                    <div class="modal-content">
                        <!-- <span class="close">&times;</span> -->
                        <div class="modal-head" >
                            <div>
                                <h3>산책가기</h3>
                            </div>
                            <div class="m_submit_button" onclick="submitWalkArticle()" >등록</div>
                
                        </div>
                        <hr>
                        <div>
                            <div style="width:100%; height:50px;"></div>
                            <div style="width:100%; height:30px;display:flex;float:left"><input id='m_input_p' style="width:90%; height:30px" placeholder="만날 장소 (상세하게 적어주세요)"></input><button onclick='startMap("서현역")'style="width:10%">지도 검색</button></div>
                            <div class="dropdown-row">
                                <div style="width:100%; height:30px;">
                                    <div class="dropdown">
                                        <button id="m_dropbtn_r" >지역</button>
                                        <div class="dropdown-content" id="m_dropdown_region">
                                        </div>
                                    </div>
                    
                                    <div class="dropdown">
                                        <button id="m_dropbtn_d">날짜</button>
                                        <div class="dropdown-content" id="m_dropdown_date">
                                        </div>
                                    </div>
                    
                                    <div class="dropdown">
                                        <button id="m_dropbtn_t">시간</button>
                                        <div class="dropdown-content" id="m_dropdown_time">
                                        </div>
                                    </div>
                                    <div class="dropdown">
                                        <button id="m_dropbtn_g">성별</button>
                                        <div class="dropdown-content" id="m_dropdown_gender">
                                        </div>
                                    </div>
                    
                                    <div class="dropdown">
                                        <button id="m_dropbtn_n">인원수</button>
                                        <div class="dropdown-content" id="m_dropdown_hc">
                                        </div>
                                    </div>
                    
                                    <div class="dropdown">
                                        <button id="m_dropbtn_s">강아지크기</button>
                                        <div class="dropdown-content" id="m_dropdown_size">
                                        </div>
                                    </div>
                    
                                    <div>
                                        <!-- <div id="editor" style="height: 400px;"></div> -->
                                        <textarea id="editor" style="height: 400px;"></textarea>
                                        <script>
                                            let theEditor;
                                            ClassicEditor
                                                .create( document.querySelector( '#editor' ))
                                                .then(editor=>{
                                                    theEditor=editor
                                                })
                                                .catch( error => {
                                                    console.error( error );
                                                } );
                                        </script>
                    
                                    </div>
                    
                    
                                </div>
                                
                            </div>
                            <div style="width:100%; height:40px;"></div>
                        </div>
                        <!---try-->
                        <textarea class="form-control" id="p_content"></textarea>
                        
                        <!---try-->
                        <div class="text-editor-wrapper" style="width:100%; min-height: 600px; background-color: aliceblue; display:none">
                            <!--text menu-->
                        </div>
                    </div>                
                </div>
                <!-------------------------------->
                
            
        </div>
        <!-- <script type="text/javascript" src="http://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=p78mob3dig"></script>
        <script>
            
            //지도를 삽입할 HTML 요소 또는 HTML 요소의 id를 지정합니다.
            var mapDiv = document.getElementById('map'); // 'map'으로 선언해도 동일

            //옵션 없이 지도 객체를 생성하면 서울 시청을 중심으로 하는 16 레벨의 지도가 생성됩니다.
            var map = new naver.maps.Map(mapDiv); -->
        <!-- </script> -->
        <script type="text/javascript" src='//dapi.kakao.com/v2/maps/sdk.js?appkey=b1ae05cf3f44682ccf7ffba8606235b3&libraries=services'></script>

        <script>


            

            function mapOn(search){
                            // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
                var infowindow = new kakao.maps.InfoWindow({zIndex:1});
                
                var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                    mapOption = {
                        center: new kakao.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
                        level: 3 // 지도의 확대 레벨
                    };  
                
                // 지도를 생성합니다    
                var map = new kakao.maps.Map(mapContainer, mapOption); 
                
                // 장소 검색 객체를 생성합니다
                var ps = new kakao.maps.services.Places(); 
                
                // 키워드로 장소를 검색합니다
                console.log(search)
                ps.keywordSearch(search, placesSearchCB); 
                var bounds = new kakao.maps.LatLngBounds();
                function placesSearchCB (data, status, pagination) {
                    if (status === kakao.maps.services.Status.OK) {

                        // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
                        // LatLngBounds 객체에 좌표를 추가합니다
                        var bounds = new kakao.maps.LatLngBounds();
                
                        for (var i=0; i<data.length; i++) {
                            displayMarker(data[i]);    
                            bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));
                        }       
                
                        // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
                        map.setBounds(bounds);
                    }

                }
                            // 지도에 마커를 표시하는 함수입니다
                function displayMarker(place) {
                    
                    // 마커를 생성하고 지도에 표시합니다
                    var marker = new kakao.maps.Marker({
                        map: map,
                        position: new kakao.maps.LatLng(place.y, place.x) 
                    });
                
                    // 마커에 클릭이벤트를 등록합니다
                    kakao.maps.event.addListener(marker, 'click', function() {
                        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
                        infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
                        infowindow.open(map, marker);
                        alert(place.place_name)
                        document.getElementById('m_input_p').value = place.place_name
                        document.getElementById('map_modal').style.display='none'
                    });
                }
            }       
            </script>
        
        <script src="./static/js/api.js"></script>
        <script src="./static/js/search.js"></script>
        <script src="/static/js/hashtag.js"></script>
        <script src="./static/js/urls.js"></script>
        <script src="/static/js/walk.js"></script>
        <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>  
        <script src="./static/js/kakao.js"></script>
        <script>
            function startMap(){
                document.getElementById('map_modal').style.display='inline'
                const search = m_input_p.value;

                mapOn(search)
            }
        </script>


</body>


